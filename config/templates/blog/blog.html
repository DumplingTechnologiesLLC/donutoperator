{% extends "base.html" %}
{% load static %}

     {# assuming that your base.html contains block content   #}
     {#   and instance variable being supplied from view      #}


{% block content %}
    <div class="row" style="margin-top:40px;">
    	<div class="col-lg-3">
    		<div style="height: 800px; overflow-y:scroll; background-color:white;">
	    		<h4>Browse Other Stories</h4>
	    		{% for post in posts %}
	    		<div style="margin-bottom:40px" class="card flex-md-row mb-4 shadow-sm h-md-250">
					<div class="card-body d-flex flex-column align-items-start">
						<strong class="d-inline-block mb-2 text-success">{{post.read_length}}</strong>
						<h3 class="mb-0" style="max-width: 200px">
							<a class="text-dark" style="text-decorate:none">{{post.title}}</a>
						</h3>
						<div class="mb-1 text-muted">{{post.publish_date|date:"M d, Y"}}</div>
						<p style="word-wrap: break-word; max-width:200px; overflow:hidden; max-height:50px; text-overflow: ellipsis" class="card-text mb-auto">{{post.description}}</p>
						<a href="{% url 'blog:display' pk=post.id %}" class="btn btn-outline-primary" style='margin-top:5px'>Read article</a>
					</div>
					<img class="card-img-top news-image" src="{{post.cover_image.url}}" alt="Card image cap" style="width: 200px; height: 250px;">
				</div>
	    		{% empty %}
	    		No other news stories
	    		{% endfor %}
    		</div>
    	</div>
    	<div class="col-lg-6 shadow-sm" id="article" style="background-color:white;">
    		<div style="display:flex; flex-direction: row; justify-content: space-between; align-items:center;">
	            <div style="display:flex; flex-direction: column">
		            <h1 > {{instance.title}} </h1>
		            <span class="text-muted">Published on: {{instance.publish_date|date:"M d, Y"}}</span>
		            <span class="text-muted">Last Modified: {{instance.modified|date:"M d, Y G:i"}}</span>
		            <span class="text-muted">Views: {{instance.views}}</span>
	            </div>
	    		<img class="" id="skip" src="{{instance.cover_image.url}}" onerror="this.src='Default.jpg'" alt="Image not available" border="0" style="width: 200px; height: 250px;">
    		</div>
            <hr>
            <div> {{ instance.content | safe }}  </div>
    	</div>
    	<div class="col-lg-3">
    		<div style="height: 800px; overflow-y:scroll;">
    			<a class="twitter-timeline" href="https://twitter.com/DonutOperator?ref_src=twsrc%5Etfw">Tweets by DonutOperator</a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    		</div>
    	</div>
    </div>
    
{% endblock %} 	

{% block js %}
<script type="text/javascript">
    $(function() {
    	var height = $("#article").height()
    	$(".timeline-Widget").height(1000);
    	$(".timeline-Widget").css("overflow-y", "scroll");
        $("#loader_cover").addClass("toggled");
        $("#body").removeAttr("style");
    	$("#body").css("background-color", " #F1F1F1");
        $('#article').children('img').each(function( index ) {
        	console.log($(this).attr("id"))
        	if ($(this).attr("id") != "skip") {
	        	var src = $(this).attr("src");
	        	console.log(src.substring(2, src.length))
	        	$(this).attr("src", src.substring(2, src.length));
        		
        	}
		});
    })
</script>
{% endblock js%}
