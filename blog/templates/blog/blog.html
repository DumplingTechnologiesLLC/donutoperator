{% extends "base.html" %}
{% load static %}


{% block content %}
    <div class="row" style="margin-top:40px;">
    	<div class="col-lg-3 social-media-container">
    		<div class="social-media-buttons">
	    		<a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fdonutoperator.herokuapp.com%2Fpost%2F{{instance.id}}" target="_blank" class="facebook-button" style="margin-bottom:5px">
                    <img src="{% static 'facebook-button.png' %}" style="width: 50px; height:50px;">
				</a>
				<a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-size="large" data-text="Check out Donut&#39;s take on this!" data-hashtags="Donutoperator" data-show-count="false">Tweet</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    			<a class="reddit-button" href="//www.reddit.com/submit?url=http%3A%2F%2Fdonutoperator.herokuapp.com%2Fpost%2F{{instance.id}}">
                    <i class="fa fa-reddit" aria-hidden="true"></i>
                </a>
    		</div>
    	</div>
    	<div class="col-lg-4" id="article" style="background-color:white;">
    		<div style="display:flex; flex-direction: row; justify-content: space-between; align-items:center;">
	            <div style="display:flex; flex-direction: column">
		            <span class="text-muted">Published on: {{instance.publish_date|date:"M d, Y"}}</span>
                    <h1 style='font-size:3rem'> {{instance.title}} </h1>
                    <span class="text-muted">{{instance.description}}</span>
                    <span style="margin-top:5px"><strong>By {{instance.authors}}</strong></span>
                 <img class="" id="skip" src="{{instance.cover_image.url}}" onerror="this.src='https://i.imgur.com/4IZIbws.png'" alt="Image not available" border="0" style="width: 100%; height: 100%;">
                </div>
            </div>
            <hr>
            <div> {{ instance.content | safe }}  </div>
		    <span class="text-muted">Last Modified: {{instance.modified|date:"M d, Y G:i"}}</span>
    	</div>
    	<div class="col-lg-2">
    			<a class="twitter-timeline" href="https://twitter.com/DonutOperator?ref_src=twsrc%5Etfw">Tweets by DonutOperator</a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    	</div>
    </div>
    
{% endblock %} 	

{% block js %}
<script type="text/javascript">

    $(function() {
    	setTimeout(function() {
            $("#twitter-widget-1").addClass("twitter-override");
    		$("#b").addClass("twitter-button");
    	},3500)
    	var height = $("#article").height()
    	$(".timeline-Widget").height(1000);
    	$(".timeline-Widget").css("overflow-y", "scroll");
        $("#loader_cover").addClass("toggled");
        $("#body").removeAttr("style");
        // this is to fix the url since the url as it defaults doesn't resolve due to
        // 2 characters at the start of the string
        $('#article').children('img').each(function( index ) {
        	if ($(this).attr("id") != "skip") {
	        	var src = $(this).attr("src");
	        	$(this).attr("src", src.substring(2, src.length));
        		
        	}
		});
    })
</script>
{% endblock js%}
